<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NeuroVault | AI Threat Command</title>

<style>
:root {
    --bg:#0d0f1a;
    --panel:rgba(20,24,45,0.8);
    --accent-primary:#8a2be2;
    --accent-secondary:#00ff9d;
    --alert:#ff0055;
    --warn:#ffae00;
    --text:#ffffff;
    --text-dim:#94a3b8;
    --border:rgba(138,43,226,0.3);
    --success:#00ff9d;

}

body{
    font-family:Inter,Segoe UI,sans-serif;
    background:var(--bg);
    background-image:
        linear-gradient(var(--border) 1px, transparent 1px),
        linear-gradient(90deg, var(--border) 1px, transparent 1px);
    background-size:50px 50px;
    color:var(--text);
    margin:0;
    display:flex;
    height:100vh;
    overflow:hidden;
}

/* Sidebar */
.sidebar{
    width:240px;
    background:var(--panel);
    backdrop-filter:blur(15px);
    border-right:1px solid var(--accent-primary);
    display:flex;
    flex-direction:column;
}

.logo{
    padding:25px;
    font-weight:900;
    color:var(--accent-secondary);
    font-size:1.5rem;
    letter-spacing:3px;
    text-shadow:0 0 15px var(--accent-secondary);
}

.nav-item{
    padding:20px 25px;
    cursor:pointer;
    color:var(--text-dim);
    text-transform:uppercase;
    font-size:.85rem;
}
.nav-item:hover{color:#fff;background:rgba(138,43,226,.1);}
.nav-item.active{
    color:var(--accent-primary);
    background:rgba(138,43,226,.15);
    border-right:4px solid var(--accent-primary);
    font-weight:bold;
}

/* Main */
.main{flex:1;display:flex;flex-direction:column;}
header{
    padding:20px 30px;
    background:rgba(13,15,26,.9);
    border-bottom:1px solid var(--border);
    display:flex;
    justify-content:space-between;
    align-items:center;
}

.view{display:none;padding:30px;flex:1;overflow-y:auto;}
.view.active{display:block;animation:slideUp .5s ease;}
@keyframes slideUp{from{opacity:0;transform:translateY(20px)}to{opacity:1}}

.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-bottom:30px;}
.stat-card{
    background:var(--panel);
    border:1px solid var(--border);
    padding:20px;
    position:relative;
}
.stat-card::before{
    content:"";
    position:absolute;
    top:0;left:0;width:100%;height:2px;
    background:linear-gradient(90deg,transparent,var(--accent-primary),transparent);
}
.stat-card .val{font-size:2.5rem;font-weight:900;color:var(--accent-secondary);}

.map-box{
    height:450px;
    border:1px solid var(--accent-primary);
    background:url("https://upload.wikimedia.org/wikipedia/commons/8/80/World_map_-_low_resolution.svg");
    background-size:cover;
    filter:invert(1) hue-rotate(180deg) brightness(.6);
    position:relative;
}

.dot{
    position:absolute;
    width:15px;
    height:15px;
    border-radius:50%;
    pointer-events:none;
}

.btn-sim{
    background:transparent;
    border:1px solid var(--accent-secondary);
    color:var(--accent-secondary);
    padding:10px 20px;
    cursor:pointer;
    letter-spacing:2px;
}
.btn-sim:hover{
    background:var(--accent-secondary);
    color:var(--bg);
    box-shadow:0 0 20px var(--accent-secondary);
}

.table-card{background:var(--panel);border:1px solid var(--border);}
table{width:100%;border-collapse:collapse;}
th{padding:20px;color:var(--accent-primary);}
td{padding:15px 20px;border-bottom:1px solid var(--border);}

.ip-card{
    background:rgba(255,0,85,.05);
    border:1px solid var(--alert);
    padding:20px;
    margin-bottom:15px;
}
.ip-address{font-family:monospace;font-size:1.5rem;}

table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
}

/* Status colors */
.status-BLOCKED{color:var(--alert);font-weight:bold;}
.status-SUSPICIOUS{color:var(--warn);font-weight:bold;}
.status-SUCCESS{color:var(--success);font-weight:bold;}

th, td {
    padding: 15px;
    text-align: left;
    word-wrap: break-word;
}

th {
    color: var(--accent-primary);
}

td.time, td.ip {
    font-family: monospace; 
}
.dot{
    position:absolute;
    width:10px;
    height:12px;
    border-radius:50%;
    z-index:20;
    box-shadow:0 0 15px currentColor;
}

/* INDIA â€“ central/south area */

.red-dot{
    background:#ee6e6e;
    top:84%;
    left:71%;
}
.green-dot{
    background:#00ff9d;
    top:85%;
    left:71%;
    
}










</style>
</head>

<body>

<aside class="sidebar">
    <div class="logo">NV-Vault</div>
    <div class="nav-item active" id="nav-dashboard" onclick="switchView('dashboard')">Terminal</div>
    <div class="nav-item" id="nav-activity" onclick="switchView('activity')">Logs</div>
    <div class="nav-item" id="nav-blocked" onclick="switchView('blocked')">Blacklist</div>
    
</aside>

<main class="main">
<header>
    <div>SYSTEM STATUS: <span style="color:var(--accent-secondary)">OPERATIONAL</span></div>
    <button class="btn-sim" onclick="clearLogs()">Clear Logs</button>
</header>

<div id="view-dashboard" class="view active">
    <div class="stats-grid">
        <div class="stat-card"><h4>ATTEMPTS</h4><span id="stat-total" class="val">0</span></div>
        <div class="stat-card"><h4>THREATS</h4><span id="stat-sus" class="val" style="color:var(--alert)">0</span></div>
        <div class="stat-card"><h4>AI CONFIDENCE</h4><span id="stat-conf" class="val">0%</span></div>
        <div class="stat-card"><h4>UPTIME</h4><span class="val">99.9%</span></div>
    </div>
    <div class="map-box" id="map">
    <div class="dot red-dot"></div>
    <div class="dot green-dot"></div>
    
</div>

</div>

<div id="view-activity" class="view">
    <div class="table-card">
        <table>
            <thead>
                <th>Time</th><th>IP</th><th>Origin</th><th>Action</th>
            </thead>
            <tbody  id="activity-rows"></tbody>
        </table>
    </div>
</div>

<div id="view-blocked" class="view">
    <div id="blocked-container"></div>
</div>
</main>

<script>
let logsLoaded=false;

function switchView(v){
    document.querySelectorAll(".view").forEach(x=>x.classList.remove("active"));
    document.querySelectorAll(".nav-item").forEach(x=>x.classList.remove("active"));
    document.getElementById("view-"+v).classList.add("active");
    document.getElementById("nav-"+v).classList.add("active");

    if(v==="activity" && !logsLoaded){
        loadAdminLogs();
        logsLoaded=true;
    }
}

async function loadAdminLogs(){
    const res=await fetch("/admin-logs/");
    const data=await res.json();

    const rows=document.getElementById("activity-rows");
    const blocked=document.getElementById("blocked-container");

    rows.innerHTML="";
    blocked.innerHTML="";

    let total=0,threats=0;

    data.logs.forEach(log=>{
        total++;
        if(log.status!=="SUCCESS") threats++;

        rows.innerHTML+=`
        <tr>
            <td class="time">${log.time}</td>
            <td class="ip">${log.ip}</td>
            <td>${log.username}</td>
            <td class="status-${log.status}">${log.status}</td>
        </tr>`;

        if(log.status==="BLOCKED"){
            blocked.innerHTML+=`
            <div class="ip-card">
                <div class="ip-address">${log.ip}</div>
                <small>Auto-blocked by AI engine</small>
            </div>`;
        }
    });

    document.getElementById("stat-total").innerText=total;
    document.getElementById("stat-sus").innerText=threats;
    document.getElementById("stat-conf").innerText=Math.min(99,threats*10)+"%";
}

async function clearLogs(){
    if(!confirm("Clear all logs?"))return;
    await fetch("/clear-logs/",{method:"POST"});
    document.getElementById("activity-rows").innerHTML="";
    document.getElementById("blocked-container").innerHTML="";
    logsLoaded=false;
    alert("Logs cleared");
}



</script>

</body>
</html>




